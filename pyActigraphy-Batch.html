<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to read raw files by batch &#8212; pyActigraphy 1.Orc1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/jquery-1.11.0.min.js"></script>
    <script src="_static/js/jquery-fix.js"></script>
    <script src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          pyActigraphy</a>
        <span class="navbar-text navbar-version pull-left"><b>1.Orc1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="tutorials.html">Tutorials</a></li>
                <li><a href="api.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/pyActigraphy-Batch.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="How-to-read-raw-files-by-batch">
<h1>How to read raw files by batch<a class="headerlink" href="#How-to-read-raw-files-by-batch" title="Permalink to this headline">¶</a></h1>
<p>Visual inspections of individual files are usually useful to detect
problems that occurred during the acquisition. However, at the analysis
level, it is convenient to read files, and calculate the variables of
interest, by batch.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">pyActigraphy</span></code>, there is a dedicated class to read files by batch:
<a class="reference external" href="https://ghammad.github.io/pyActigraphy/RawReader.html#pyActigraphy.io.RawReader">RawReader</a>.
Objects from that class can easily be instanciated using the
<a class="reference external" href="https://ghammad.github.io/pyActigraphy/_autosummary/pyActigraphy.io.read_raw.html#pyActigraphy.io.read_raw">read_raw</a>
function.</p>
<p>Let’s see now how to use it.</p>
<div class="section" id="Define-imported-packages-and-file-path">
<h2>Define imported packages and file path<a class="headerlink" href="#Define-imported-packages-and-file-path" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pyActigraphy</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="stderr output_area docutils container">
<div class="highlight"><pre>
/usr/local/lib/python3.7/site-packages/statsmodels/tools/_testing.py:19: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.
  import pandas.util.testing as tm
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># retrieve path to example files</span>
<span class="n">fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pyActigraphy</span><span class="o">.</span><span class="vm">__file__</span><span class="p">),</span><span class="s1">&#39;tests/data/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Read-files-by-batch">
<h2>Read files by batch<a class="headerlink" href="#Read-files-by-batch" title="Permalink to this headline">¶</a></h2>
<p>As raw file extensions (such as .csv or .txt) do not allow to infer the
type of device used to acquire the data, it is necessary to specify the
“reader type” upon reading the files:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Read test files</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">pyActigraphy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_raw</span><span class="p">(</span><span class="n">fpath</span><span class="o">+</span><span class="s1">&#39;example_0*.AWD&#39;</span><span class="p">,</span> <span class="n">reader_type</span><span class="o">=</span><span class="s1">&#39;AWD&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In the example above, we use a wildcard “*“; it substitutes any
character and it is a convenient way to specify multiple files at once.
Any file whose name contains”example_0“, with a”.AWD” extension will be
read. More info on wildcards:
<a class="reference external" href="https://en.wikipedia.org/wiki/Wildcard_character">Wikipedia</a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">raw</span></code> object that has been instanciated contains a list of objects
that one would have otherwise had to create by hand using individual
file functions such as <code class="docutils literal notranslate"><span class="pre">read_raw_awd</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Check how many files have been read</span>
<span class="nb">len</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">readers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>6
</pre></div>
</div>
</div>
<p>Indeed, there are 6 example files of type ‘.AWD’ in the test data
directory of the <code class="docutils literal notranslate"><span class="pre">pyActigraphy</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="o">.</span><span class="n">names</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;example_01&#39;,
 &#39;example_01_mask&#39;,
 &#39;example_02&#39;,
 &#39;example_03&#39;,
 &#39;example_04&#39;,
 &#39;example_05&#39;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="Analyse-files-by-batch">
<h2>Analyse files by batch<a class="headerlink" href="#Analyse-files-by-batch" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to analyse files that have been read by batch:</p>
<ul class="simple">
<li><p>the needed function already exists at the <code class="docutils literal notranslate"><span class="pre">RawReader</span></code> class level</p></li>
<li><p>the needed function does not exist and one needs to loop over the
files</p></li>
</ul>
<div class="section" id="Direct-analysis">
<h3>Direct analysis<a class="headerlink" href="#Direct-analysis" title="Permalink to this headline">¶</a></h3>
<p>For convenience, a certain number of functions, available at the
individual reader level, have been extended to the <code class="docutils literal notranslate"><span class="pre">RawReader</span></code> class.</p>
<p>For example:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Check the duration of the recording</span>
<span class="n">raw</span><span class="o">.</span><span class="n">duration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;example_01&#39;: Timedelta(&#39;12 days 18:41:00&#39;),
 &#39;example_01_mask&#39;: Timedelta(&#39;12 days 18:41:00&#39;),
 &#39;example_02&#39;: Timedelta(&#39;12 days 18:53:00&#39;),
 &#39;example_03&#39;: Timedelta(&#39;14 days 21:36:00&#39;),
 &#39;example_04&#39;: Timedelta(&#39;21 days 17:39:00&#39;),
 &#39;example_05&#39;: Timedelta(&#39;15 days 01:43:00&#39;)}
</pre></div>
</div>
</div>
<p>These functions return a dictionary whose keys are the individual file
names and values are the required outputs (here, the duration of the
individual recordings).</p>
<p>Most rest-activity rhythm related variables are available:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="o">.</span><span class="n">IS</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;example_01&#39;: 0.5261668298837823,
 &#39;example_01_mask&#39;: 0.4453375595033997,
 &#39;example_02&#39;: 0.5188779301789207,
 &#39;example_03&#39;: 0.3717308344487576,
 &#39;example_04&#39;: 0.2551624866267735,
 &#39;example_05&#39;: 0.662777313088957}
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">raw</span><span class="o">.</span><span class="n">kAR</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;example_01&#39;: 0.033762534539447164,
 &#39;example_01_mask&#39;: 0.036345931354120085,
 &#39;example_02&#39;: 0.026240794466679603,
 &#39;example_03&#39;: 0.023099082226598566,
 &#39;example_04&#39;: 0.03815016462875074,
 &#39;example_05&#39;: 0.030282109908435897}
</pre></div>
</div>
</div>
</div>
<div class="section" id="Manual-analysis">
<h3>Manual analysis<a class="headerlink" href="#Manual-analysis" title="Permalink to this headline">¶</a></h3>
<p>As already mentioned, the “raw” object is a container. It is possible to
simply loop over the objects contained in the “raw” object:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">iread</span> <span class="ow">in</span> <span class="n">raw</span><span class="o">.</span><span class="n">readers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Object type: </span><span class="si">{}</span><span class="s2">. Name: </span><span class="si">{}</span><span class="s2">. Duration of the recording: </span><span class="si">{}</span><span class="s2">. Number of acquisition points: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">iread</span><span class="p">),</span><span class="n">iread</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">iread</span><span class="o">.</span><span class="n">duration</span><span class="p">(),</span><span class="nb">len</span><span class="p">(</span><span class="n">iread</span><span class="o">.</span><span class="n">data</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_01. Duration of the recording: 12 days 18:41:00. Number of acquisition points: 18401
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_01_mask. Duration of the recording: 12 days 18:41:00. Number of acquisition points: 18401
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_02. Duration of the recording: 12 days 18:53:00. Number of acquisition points: 18413
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_03. Duration of the recording: 14 days 21:36:00. Number of acquisition points: 21456
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_04. Duration of the recording: 21 days 17:39:00. Number of acquisition points: 31299
Object type: &lt;class &#39;pyActigraphy.io.awd.awd.RawAWD&#39;&gt;. Name: example_05. Duration of the recording: 15 days 01:43:00. Number of acquisition points: 21703
</pre></div></div>
</div>
<p>So, for a more advanced analysis of the actigraphy recordings, simply
replace the “print” statement by our analysis code.</p>
<p>Et voilà! Easy, isn’t it?</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018-2020, Grégory Hammad.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>